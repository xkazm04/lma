import type {
  KPIPrediction,
  FacilityPrediction,
  WhatIfScenario,
  MarginImpactPrediction,
  PortfolioPrediction,
} from './types';

export const mockKPIPredictions: KPIPrediction[] = [
  {
    kpi_id: 'kpi-1',
    kpi_name: 'Scope 1 & 2 GHG Emissions',
    kpi_category: 'environmental_emissions',
    unit: 'tCO2e',
    current_value: 42000,
    baseline_value: 50000,
    target_value: 40000,
    target_date: '2025-12-31',
    predicted_value: 41200,
    prediction_date: '2024-12-08',
    confidence: 'medium',
    confidence_score: 72,
    trend: 'improving',
    will_miss_target: false,
    days_until_deadline: 388,
    gap_to_target: -2000,
    gap_percentage: -5,
    historical_data: [
      { period: 'Q1 2024', value: 48000 },
      { period: 'Q2 2024', value: 45000 },
      { period: 'Q3 2024', value: 43000 },
      { period: 'Q4 2024', value: 42000 },
    ],
    prediction_factors: ['Historical trend', 'Energy efficiency initiatives', 'Renewable energy transition'],
  },
  {
    kpi_id: 'kpi-2',
    kpi_name: 'Renewable Energy Share',
    kpi_category: 'environmental_energy',
    unit: '%',
    current_value: 42,
    baseline_value: 25,
    target_value: 50,
    target_date: '2025-12-31',
    predicted_value: 46,
    prediction_date: '2024-12-08',
    confidence: 'low',
    confidence_score: 58,
    trend: 'improving',
    will_miss_target: true,
    days_until_deadline: 388,
    gap_to_target: 8,
    gap_percentage: 16,
    historical_data: [
      { period: 'Q1 2024', value: 28 },
      { period: 'Q2 2024', value: 33 },
      { period: 'Q3 2024', value: 38 },
      { period: 'Q4 2024', value: 42 },
    ],
    prediction_factors: ['Solar installation delays', 'Grid capacity constraints', 'PPA negotiations ongoing'],
  },
  {
    kpi_id: 'kpi-3',
    kpi_name: 'Women in Leadership',
    kpi_category: 'social_workforce',
    unit: '%',
    current_value: 28,
    baseline_value: 22,
    target_value: 30,
    target_date: '2025-12-31',
    predicted_value: 31,
    prediction_date: '2024-12-08',
    confidence: 'high',
    confidence_score: 85,
    trend: 'improving',
    will_miss_target: false,
    days_until_deadline: 388,
    gap_to_target: 2,
    gap_percentage: 6.67,
    historical_data: [
      { period: 'Q1 2024', value: 23 },
      { period: 'Q2 2024', value: 25 },
      { period: 'Q3 2024', value: 27 },
      { period: 'Q4 2024', value: 28 },
    ],
    prediction_factors: ['Leadership development program', 'Recruitment initiatives', 'Promotion pipeline strong'],
  },
  {
    kpi_id: 'kpi-4',
    kpi_name: 'Lost Time Injury Rate',
    kpi_category: 'social_health_safety',
    unit: 'per 1M hours',
    current_value: 1.8,
    baseline_value: 2.5,
    target_value: 1.5,
    target_date: '2025-12-31',
    predicted_value: 1.6,
    prediction_date: '2024-12-08',
    confidence: 'medium',
    confidence_score: 68,
    trend: 'improving',
    will_miss_target: true,
    days_until_deadline: 388,
    gap_to_target: -0.3,
    gap_percentage: -20,
    historical_data: [
      { period: 'Q1 2024', value: 2.3 },
      { period: 'Q2 2024', value: 2.1 },
      { period: 'Q3 2024', value: 1.9 },
      { period: 'Q4 2024', value: 1.8 },
    ],
    prediction_factors: ['Safety training completion', 'Equipment upgrades', 'Seasonal variation'],
  },
];

export const mockMarginImpact: MarginImpactPrediction = {
  facility_id: '1',
  facility_name: 'ABC Corp Sustainability-Linked Loan',
  current_margin_bps: 190,
  base_margin_bps: 200,
  predicted_margin_bps: 200,
  predicted_adjustment_bps: 10,
  max_adjustment_bps: 25,
  financial_impact: {
    annual_interest_cost_change: 120000,
    outstanding_amount: 120000000,
    percentage_change: 5.26,
  },
  contributing_kpis: [
    { kpi_name: 'Renewable Energy Share', contribution_bps: 5, will_miss: true },
    { kpi_name: 'Lost Time Injury Rate', contribution_bps: 5, will_miss: true },
    { kpi_name: 'Scope 1 & 2 GHG Emissions', contribution_bps: 0, will_miss: false },
    { kpi_name: 'Women in Leadership', contribution_bps: 0, will_miss: false },
  ],
  confidence: 'medium',
  effective_date: '2026-01-15',
};

export const mockWhatIfScenarios: WhatIfScenario[] = [
  {
    id: 'scenario-1',
    name: 'Accelerate Solar Installation',
    description: 'Fast-track the planned solar installation to increase renewable energy share by Q3 2025',
    interventions: [
      {
        id: 'int-1',
        name: 'Expedited Solar Project',
        description: 'Accelerate 5MW solar farm installation with premium contractor',
        kpi_impact: 6,
        kpi_impact_percentage: 14.3,
        cost_estimate: 250000,
        time_to_effect: '6 months',
        category: 'capital',
        risk_level: 'medium',
        dependencies: ['Grid connection approval', 'Equipment delivery'],
      },
      {
        id: 'int-2',
        name: 'Short-term PPA',
        description: 'Sign 2-year power purchase agreement for renewable energy',
        kpi_impact: 3,
        kpi_impact_percentage: 7.1,
        cost_estimate: 50000,
        time_to_effect: '2 months',
        category: 'operational',
        risk_level: 'low',
      },
    ],
    original_prediction: mockKPIPredictions[1],
    adjusted_prediction: {
      ...mockKPIPredictions[1],
      kpi_id: 'kpi-2-adjusted',
      predicted_value: 52,
      will_miss_target: false,
      confidence: 'medium',
      confidence_score: 70,
    },
    margin_impact_change: -5,
    financial_benefit: 60000,
    implementation_cost: 300000,
    roi: 0.2,
    probability_of_success: 75,
    time_to_implement: '8 months',
  },
  {
    id: 'scenario-2',
    name: 'Enhanced Safety Program',
    description: 'Implement comprehensive safety improvement program to reduce injury rate',
    interventions: [
      {
        id: 'int-3',
        name: 'Advanced Safety Training',
        description: 'Deploy VR-based safety training for all operational staff',
        kpi_impact: 0.2,
        kpi_impact_percentage: 11.1,
        cost_estimate: 75000,
        time_to_effect: '4 months',
        category: 'operational',
        risk_level: 'low',
      },
      {
        id: 'int-4',
        name: 'Predictive Safety Analytics',
        description: 'AI-powered incident prediction and prevention system',
        kpi_impact: 0.15,
        kpi_impact_percentage: 8.3,
        cost_estimate: 120000,
        time_to_effect: '6 months',
        category: 'capital',
        risk_level: 'medium',
      },
    ],
    original_prediction: mockKPIPredictions[3],
    adjusted_prediction: {
      ...mockKPIPredictions[3],
      kpi_id: 'kpi-4-adjusted',
      predicted_value: 1.4,
      will_miss_target: false,
      confidence: 'high',
      confidence_score: 78,
    },
    margin_impact_change: -5,
    financial_benefit: 60000,
    implementation_cost: 195000,
    roi: 0.31,
    probability_of_success: 82,
    time_to_implement: '6 months',
  },
  {
    id: 'scenario-3',
    name: 'Combined ESG Acceleration',
    description: 'Comprehensive program addressing both renewable energy and safety KPIs',
    interventions: [
      {
        id: 'int-5',
        name: 'Green Energy Partnership',
        description: 'Strategic partnership with utility for guaranteed renewable supply',
        kpi_impact: 8,
        kpi_impact_percentage: 19,
        cost_estimate: 100000,
        time_to_effect: '3 months',
        category: 'strategic',
        risk_level: 'low',
      },
      {
        id: 'int-6',
        name: 'Safety Excellence Initiative',
        description: 'Company-wide safety culture transformation program',
        kpi_impact: 0.3,
        kpi_impact_percentage: 16.7,
        cost_estimate: 200000,
        time_to_effect: '9 months',
        category: 'strategic',
        risk_level: 'medium',
        dependencies: ['Leadership commitment', 'Union agreement'],
      },
    ],
    original_prediction: mockKPIPredictions[1],
    adjusted_prediction: {
      ...mockKPIPredictions[1],
      kpi_id: 'kpi-multi-adjusted',
      predicted_value: 53,
      will_miss_target: false,
      confidence: 'medium',
      confidence_score: 68,
    },
    margin_impact_change: -10,
    financial_benefit: 120000,
    implementation_cost: 300000,
    roi: 0.4,
    probability_of_success: 70,
    time_to_implement: '9 months',
  },
];

export const mockFacilityPrediction: FacilityPrediction = {
  facility_id: '1',
  facility_name: 'ABC Corp Sustainability-Linked Loan',
  borrower_name: 'ABC Corporation',
  esg_loan_type: 'sustainability_linked',
  overall_risk_level: 'medium',
  prediction_date: new Date().toISOString(),
  prediction_horizon_days: 90,
  kpi_predictions: mockKPIPredictions,
  margin_impact: mockMarginImpact,
  what_if_scenarios: mockWhatIfScenarios,
  recommended_actions: [
    {
      id: 'action-1',
      title: 'Accelerate Renewable Energy Transition',
      description: 'Fast-track solar installation and sign short-term PPA to bridge the gap to the 50% renewable target',
      priority: 'high',
      expected_impact: 'Could add 8-10% to renewable energy share within 6 months',
      kpis_affected: ['Renewable Energy Share'],
      deadline: '2025-06-30',
      estimated_effort: '3-6 months',
      potential_margin_benefit_bps: 5,
    },
    {
      id: 'action-2',
      title: 'Enhance Safety Training Program',
      description: 'Deploy advanced VR-based safety training and predictive analytics to reduce injury rate',
      priority: 'medium',
      expected_impact: 'Expected 15-20% reduction in LTIR',
      kpis_affected: ['Lost Time Injury Rate'],
      deadline: '2025-09-30',
      estimated_effort: '4-6 months',
      potential_margin_benefit_bps: 5,
    },
    {
      id: 'action-3',
      title: 'Maintain GHG Reduction Momentum',
      description: 'Continue current emissions reduction initiatives to ensure target achievement',
      priority: 'low',
      expected_impact: 'On track for target - maintain current trajectory',
      kpis_affected: ['Scope 1 & 2 GHG Emissions'],
      estimated_effort: 'Ongoing',
      potential_margin_benefit_bps: 0,
    },
  ],
  summary: {
    total_kpis: 4,
    kpis_on_track: 2,
    kpis_at_risk: 2,
    kpis_off_track: 0,
    predicted_margin_change_bps: 10,
    financial_exposure: 120000,
    earliest_deadline: '2025-12-31',
    highest_priority_action: 'Accelerate Renewable Energy Transition',
  },
};

export const mockPortfolioPrediction: PortfolioPrediction = {
  generated_at: new Date().toISOString(),
  prediction_horizon_days: 90,
  total_facilities: 5,
  facilities_at_risk: 2,
  total_financial_exposure: 350000,
  aggregate_margin_impact_bps: 8,
  facility_predictions: [mockFacilityPrediction],
  portfolio_summary: {
    green_facilities: 2,
    amber_facilities: 2,
    red_facilities: 1,
    total_potential_step_ups: 25,
    total_potential_savings: 420000,
  },
  top_interventions: mockWhatIfScenarios[0].interventions,
};
